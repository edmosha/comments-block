(()=>{"use strict";const t=function(t,e){var n=t.author,r=t.date,i=t.text,o=t.handleLike,s=t.handleDelete;this._author=n,this._date=r,this._text=i,this._handleLike=o,this._handleDelete=s,this.getTemplate=function(){return document.querySelector(e).content.querySelector(".comments__item").cloneNode(!0)},this.like=function(){this._likeButton.classList.toggle("comment__like-btn_active"),this._likeButton.classList.contains("comment__like-btn_active")?this._likeCounter.textContent=+this._likeCounter.textContent+1:this._likeCounter.textContent=+this._likeCounter.textContent-1},this.delete=function(){this._element.remove(),this._element=null},this._setEventListeners=function(){var t=this;this._likeButton.addEventListener("click",(function(){t._handleLike()})),this._deleteButton.addEventListener("click",(function(){t._handleDelete()}))},this.createComment=function(){this._element=this.getTemplate(),this._likeButton=this._element.querySelector(".comment__like-btn"),this._likeCounter=this._element.querySelector(".comment__like-counter"),this._deleteButton=this._element.querySelector(".comment__delete-btn");var t=this._element.querySelector(".comment__author"),e=this._element.querySelector(".comment__date"),n=this._element.querySelector(".comment__text");return t.textContent=this._author,e.textContent=this._date,n.textContent=this._text,this._setEventListeners(),this._element}};function e(e){var n=e.author,r=e.date,i=e.text,o=new t({author:n,date:r,text:i,handleLike:function(){o.like()},handleDelete:function(){o.delete()}},"#comment");return o.createComment()}function n(t,e){e.append(t)}function r(t){var e=new Date;e.setHours(0,0,0,0);var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()-1),r=new Date(t);switch(r.setHours(0,0,0,0),!0){case""===t:case r.getFullYear()<=2010:case e<=r:return"Сегодня";case n.getTime()===r.getTime():return"Вчера"}return t}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=document.querySelector(".comments__container"),a=new function(t,e){var n=t.handleFormSubmit;this._element=document.querySelector(e),this._handleFormSubmit=n,this._findAllInputs=function(){var t=this._element.querySelectorAll(".comments__input"),e=this._element.querySelectorAll(".comments__text");return this._inputList=Array.from(t).concat(Array.from(e)),this._inputList},this._getInputValues=function(){this._findAllInputs();var t={};return this._inputList.forEach((function(e){return t[e.name]=e.value})),t},this.getFormElement=function(){return this._element},this.clearInputs=function(){this._inputList.forEach((function(t){t.value=""}))},this.setEventListeners=function(){var t=this;this._element.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())}))}}({handleFormSubmit:function(t){n(e(s(s({},t),{},{date:r(t.date)})),u),a.clearInputs(),c.resetValidation()}},".comments__form");a.setEventListeners();var c=new function(t,e){this._inputSelector=t.inputSelector,this._textAreaSelector=t.textAreaSelector,this._submitButtonSelector=t.submitButtonSelector,this._errorElementSelector=t.errorElementSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._textAreaErrorClass=t.textAreaErrorClass,this._formElement=e,this._showInputError=function(t,e){var n=this._formElement.querySelector("".concat(this._errorElementSelector,"_type_").concat(t.name));"textarea"===t.type?t.classList.add(this._textAreaErrorClass):t.classList.add(this._inputErrorClass),n.textContent=e},this._hideInputError=function(t){var e=this._formElement.querySelector("".concat(this._errorElementSelector,"_type_").concat(t.name));"textarea"===t.type?t.classList.remove(this._textAreaErrorClass):t.classList.remove(this._inputErrorClass),e.textContent=""},this._isValid=function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)},this._hasInvalidInput=function(){return this._inputList.some((function(t){return!t.validity.valid}))},this._toggleButtonState=function(){this._hasInvalidInput()?(this._buttonElem.classList.add(this._inactiveButtonClass),this._buttonElem.setAttribute("disabled","true")):(this._buttonElem.classList.remove(this._inactiveButtonClass),this._buttonElem.removeAttribute("disabled"))},this._findAllInputs=function(){var t=this._formElement.querySelectorAll(this._inputSelector),e=this._formElement.querySelectorAll(this._textAreaSelector);return Array.from(t).concat(Array.from(e))},this._setEventListener=function(){var t=this;this._inputList=this._findAllInputs(),this._buttonElem=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._isValid(e),t._toggleButtonState()}))}))},this.resetValidation=function(){this._toggleButtonState()},this.enableValidation=function(){this._setEventListener()}}({inputSelector:".comments__input",textAreaSelector:".comments__text",submitButtonSelector:".comments__submit-btn",errorElementSelector:".comments__input-error",inactiveButtonClass:"comments__submit-btn_inactive",inputErrorClass:"comments__input_type_error",textAreaErrorClass:"comments__text_type_error"},a.getFormElement());c.enableValidation(),n(e({author:"Даша",date:r("2023-03-16"),text:"Это - вечный комментарий, и он тут просто так. Напиши и ты свой ;)"}),u)})();